
import { remotable } from "hediet-remoting";

interface FinishedBet {
	serverCommitment: string;
	player1Commitment: string;
	player2Commitment: string;
	serverSecret: string;
	player1Secret: string;
	player2Secret: string;
	winningPlayer: 1|2;
}

export class ClientInterface {
	@remotable()
	public player1GetSecret(player2Commitment: string, serverCommitment: string): PromiseLike<string> { throw ""; }

	@remotable({ isOneWay: true })
	public onFinishedBet(bet: FinishedBet) { throw ""; }
}

export class ServerInterface {
	@remotable()
	public login(username: string): PromiseLike<void> { throw ""; };

	@remotable()
	public createBet(value: number, randomCommitment: string): PromiseLike<{ betId: string }> { throw ""; }

	@remotable()
	public getBets(): PromiseLike<{ opponentCommitment: string, serverCommitment: string }> { throw ""; }

	@remotable()
	public joinBet(betId: string, secret: string): PromiseLike<void> { throw ""; }
}

